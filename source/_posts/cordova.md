---
title: cordova
date: 2018-10-24 14:24:14
tags:
---
# Cordova初探 #
## Cordova是什么？ ##
Apache Cordova是开源移动端开发框架。它允许你使用标准的web技术 -- HTML5,CSS3和JavaScript来跨平台开发。应用在与针对各平台（android,ios等）的容器中运行，可以使用与标准兼容的API来访问各个设备（如传感器、网络状态等）
## Cordova的结构 ##
cordova 应用由多个部分组成。如下图
![](https://cordova.apache.org/static/img/guide/cordovaapparchitecture.png)
### WebView ###
为应用提供所有用户接口，可以理解为浏览器
### Web App ###
即应用代码，html文件放在这里
### Plugins ###
使得有能力通过js调用native code的能力
## 安装搭建及遇到的问题 ##
1.全局安装cordova

npm install -g cordova 

2.创建项目

cordova create hello com.example.hello HelloWorld

3.添加平台(以安卓为例)

cordova platform add android

4.环境检查

cordova requirements


问题：

a.Android SDK uninstalled

解决办法：下载android studio, 安装过程最好有vpn，这样不会有莫名其妙的问题

b.Android target问题

解决办法：在android studio中打开SDK Manager找到对应的target安装好

## 生成App ##
cordova build

## Cordova App更新问题 ##
可以使用cordova-hot-code-push-plugin热更新

使用方法：

1.添加插件： cordova plugin add cordova-hot-code-push-plugin

2.全局安装: npm install -g cordova-hot-code-push-cli

3.在服务器可访问路径下创建一个目录，比如：hotcode 

4.在项目的根目录下新建一个cordova-hcp.json的文件添加以下内容


```JSON
{
  "autogenerated": true,
  "release": "2016.11.08-15.13.26",
  "content_url": "你的服务器访问路径/hotcode",
  "update": "now"
}
```

5.在项目路径下运行cordova-hcp build，运行后会在www目录下生成chcp.json和chcp.manifest文件（必须）

6.将项目中的www目录下所有文件上传到服务起刚才新建的目录hotcode下面

7.将下面代码加入项目config.xml，然后运行cordova build android
```
<chcp>
  <config-file url=" 你的服务器访问路径/hotcode/chcp.json"/>
</chcp>
```

8.修改www目录下的内容，运行cordova-hcp build,将index.html和chcp.json和chcp.manifest上传至服务器对应的位置

## 测试 ##
配置好虚拟设备之后执行 cordova emulate android